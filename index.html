<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Access and Process LOBSTER High-Frequency Data • lobsteR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Access and Process LOBSTER High-Frequency Data">
<meta name="description" content="Provides tools to authenticate with &lt;https://app.lobsterdata.com/&gt;, request, download, and process high-frequency limit order book data. Streamlines the end-to-end workflow from data request to analysis-ready datasets. For advanced high-frequency econometric analysis, see the highfrequency package.">
<meta property="og:description" content="Provides tools to authenticate with &lt;https://app.lobsterdata.com/&gt;, request, download, and process high-frequency limit order book data. Streamlines the end-to-end workflow from data request to analysis-ready datasets. For advanced high-frequency econometric analysis, see the highfrequency package.">
<meta property="og:image" content="https://voigtstefan.github.io/lobsteR/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">lobsteR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/voigtstefan/lobsteR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="lobster-">lobsteR <a class="anchor" aria-label="anchor" href="#lobster-"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>lobsteR</code> provides a tidy workflow for requesting, downloading, and reading <a href="https://app.lobsterdata.com/" class="external-link">LOBSTER</a> high-frequency order book data directly from R. LOBSTER reconstructs full limit order books from NASDAQ historical message data and delivers them as pairs of message files and order book snapshot files. This package handles the end-to-end pipeline — authentication, request submission, archive retrieval, and file download — so you can focus on analysis. For downstream high-frequency econometrics, see the <a href="https://CRAN.R-project.org/package=highfrequency" class="external-link"><code>highfrequency</code></a> package.</p>
<p><strong>Prerequisites:</strong> an active account at <a href="https://app.lobsterdata.com/" class="external-link">lobsterdata.com</a> is required to request and download data.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the released version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"lobsteR"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version from <a href="https://github.com/voigtstefan/lobsteR" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"voigtstefan/lobsteR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/voigtstefan/lobsteR" class="external-link">lobsteR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="id_1-authenticate">1. Authenticate<a class="anchor" aria-label="anchor" href="#id_1-authenticate"></a>
</h3>
<p>Store your credentials in <code>.Renviron</code> (open it with <code>usethis::edit_r_environ()</code>) to avoid hardcoding them in scripts:</p>
<pre><code><span><span class="va">LOBSTER_USER</span><span class="op">=</span><span class="va">you</span><span class="op">@</span><span class="va">example.com</span></span>
<span><span class="va">LOBSTER_PWD</span><span class="op">=</span><span class="va">your</span><span class="op">-</span><span class="va">password</span></span></code></pre>
<p>Then authenticate:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lobster_login</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/account_login.html">account_login</a></span><span class="op">(</span></span>
<span>  login <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LOBSTER_USER"</span><span class="op">)</span>,</span>
<span>  pwd   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LOBSTER_PWD"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_2-build-a-request">2. Build a request<a class="anchor" aria-label="anchor" href="#id_2-build-a-request"></a>
</h3>
<p><code><a href="reference/request_query.html">request_query()</a></code> expands a symbol and date range into one row per trading day, automatically removing weekends and NYSE holidays. <code>level</code> sets the number of order book price levels included in the snapshot files (e.g. <code>10</code> returns the top 10 bid and ask levels).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/voigtstefan/lobsteR" class="external-link">lobsteR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/request_query.html">request_query</a></span><span class="op">(</span></span>
<span>  symbol     <span class="op">=</span> <span class="st">"MSFT"</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2023-01-02"</span>,</span>
<span>  end_date   <span class="op">=</span> <span class="st">"2023-01-13"</span>,</span>
<span>  level      <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    symbol start_date   end_date level</span></span>
<span><span class="co">#&gt; 2    MSFT 2023-01-03 2023-01-03    10</span></span>
<span><span class="co">#&gt; 3    MSFT 2023-01-04 2023-01-04    10</span></span>
<span><span class="co">#&gt; 4    MSFT 2023-01-05 2023-01-05    10</span></span>
<span><span class="co">#&gt; 5    MSFT 2023-01-06 2023-01-06    10</span></span>
<span><span class="co">#&gt; 8    MSFT 2023-01-09 2023-01-09    10</span></span>
<span><span class="co">#&gt; 9    MSFT 2023-01-10 2023-01-10    10</span></span>
<span><span class="co">#&gt; 10   MSFT 2023-01-11 2023-01-11    10</span></span>
<span><span class="co">#&gt; 11   MSFT 2023-01-12 2023-01-12    10</span></span>
<span><span class="co">#&gt; 12   MSFT 2023-01-13 2023-01-13    10</span></span></code></pre>
<p>For large date ranges, use <code>frequency = "1 month"</code> to submit one request per month rather than one per day, which reduces load on the LOBSTER server.</p>
</div>
<div class="section level3">
<h3 id="id_3-submit-the-request">3. Submit the request<a class="anchor" aria-label="anchor" href="#id_3-submit-the-request"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/request_submit.html">request_submit</a></span><span class="op">(</span></span>
<span>  account_login <span class="op">=</span> <span class="va">lobster_login</span>,</span>
<span>  request       <span class="op">=</span> <span class="va">data_request</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>LOBSTER processes requests server-side. Depending on the volume of messages, this can take anywhere from a few minutes to several hours. You can safely close your R session while waiting — processing continues on the LOBSTER servers.</p>
</div>
<div class="section level3">
<h3 id="id_4-check-the-archive">4. Check the archive<a class="anchor" aria-label="anchor" href="#id_4-check-the-archive"></a>
</h3>
<p>Once processing is complete, the files appear in your account archive:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lobster_archive</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/account_archive.html">account_archive</a></span><span class="op">(</span>account <span class="op">=</span> <span class="va">lobster_login</span><span class="op">)</span></span>
<span><span class="va">lobster_archive</span></span></code></pre></div>
<p>The returned tibble has one row per available dataset with columns <code>id</code>, <code>symbol</code>, <code>start_date</code>, <code>end_date</code>, <code>level</code>, <code>size</code>, and <code>download</code>.</p>
</div>
<div class="section level3">
<h3 id="id_5-download">5. Download<a class="anchor" aria-label="anchor" href="#id_5-download"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">"data-lobster"</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/data_download.html">data_download</a></span><span class="op">(</span></span>
<span>  requested_data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lobster_archive</span>, <span class="va">symbol</span> <span class="op">==</span> <span class="st">"MSFT"</span><span class="op">)</span>,</span>
<span>  account_login  <span class="op">=</span> <span class="va">lobster_login</span>,</span>
<span>  path           <span class="op">=</span> <span class="st">"data-lobster"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Downloaded <code>.7z</code> archives are extracted automatically. Pass <code>unzip = FALSE</code> to keep the raw archives. Note that extraction runs in a background process, so the function returns before the files are fully written to disk — check the <code>path</code> directory before proceeding with analysis.</p>
</div>
</div>
<div class="section level2">
<h2 id="system-dependencies-on-linux">System dependencies on Linux<a class="anchor" aria-label="anchor" href="#system-dependencies-on-linux"></a>
</h2>
<p>The <code>archive</code> package used for <code>.7z</code> extraction requires system libraries. On a Debian/Ubuntu system:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> gpgv gnupg libarchive13t64 liblz4-dev libacl1-dev libext2fs-dev nettle-dev</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> libarchive-dev</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/voigtstefan/lobsteR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/voigtstefan/lobsteR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lobsteR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Karol Kulma <br><small class="roles"> Author </small>   </li>
<li>Stefan Voigt <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://app.codecov.io/gh/voigtstefan/lobsteR" class="external-link"><img src="https://codecov.io/gh/voigtstefan/lobsteR/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/voigtstefan/lobsteR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/voigtstefan/lobsteR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karol Kulma, Stefan Voigt.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
